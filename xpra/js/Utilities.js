"use strict";var Utilities={VERSION:"3.0.1",exc:function(){console.error.apply(console,arguments)},error:function(){console.error.apply(console,arguments)},warn:function(){console.log.apply(console,arguments)},log:function(){console.log.apply(console,arguments)},debug:function(){console.debug.apply(console,arguments)},cexc:function(){console.error.apply(console,arguments)},cerror:function(){console.error.apply(console,arguments)},cwarn:function(){console.log.apply(console,arguments)},clog:function(){console.log.apply(console,arguments)},cdebug:function(){console.debug.apply(console,arguments)},getHexUUID:function(){for(var s=[],hexDigits="0123456789abcdef",i=0;i<36;i++)s[i]=8==i||13==i||18==i||23==i?"-":hexDigits.substr(Math.floor(16*Math.random()),1);return s.join("")},getSalt:function(l){if(l<32||l>256)throw"invalid salt length";for(var s="";s.length<l;)s+=Utilities.getHexUUID();return s.slice(0,l)},xorString:function(str1,str2){var result="";if(str1.length!==str2.length)throw"strings must be equal length";for(var i=0;i<str1.length;i++)result+=String.fromCharCode(str1[i].charCodeAt(0)^str2[i].charCodeAt(0));return result},trimString:function(str,trimLength){return str.length>trimLength?str.substring(0,trimLength-3)+"...":str},getPlatformProcessor:function(){return navigator.oscpu?navigator.oscpu:navigator.cpuClass?navigator.cpuClass:"unknown"},getPlatformName:function(){return navigator.appVersion.includes("Win")?"Microsoft Windows":navigator.appVersion.includes("Mac")?"Mac OSX":navigator.appVersion.includes("Linux")?"Linux":navigator.appVersion.includes("X11")?"Posix":"unknown"},getPlatform:function(){return navigator.appVersion.includes("Win")?"win32":navigator.appVersion.includes("Mac")?"darwin":navigator.appVersion.includes("Linux")?"linux":navigator.appVersion.includes("X11")?"posix":"unknown"},getFirstBrowserLanguage:function(){var i,language,nav=window.navigator,browserLanguagePropertyKeys=["language","browserLanguage","systemLanguage","userLanguage"];if(Array.isArray(nav.languages))for(i=0;i<nav.languages.length;i++)if((language=nav.languages[i])&&language.length)return language;for(i=0;i<browserLanguagePropertyKeys.length;i++){if((language=nav[browserLanguagePropertyKeys[i]])&&language.length)return language}return null},getKeyboardLayout:function(){var v=Utilities.getFirstBrowserLanguage();if(console.debug("getFirstBrowserLanguage()=",v),null==v)return"us";var layout=LANGUAGE_TO_LAYOUT[v];if(layout)return layout;v=v.split(",")[0];var l=v.split("-",2);return 1===l.length&&(l=v.split("_",2)),1===l.length?"":(layout=l[1].toLowerCase(),console.debug("getKeyboardLayout()=",layout),layout)},canUseWebP:function(){var elem=document.createElement("canvas");return!!elem.getContext("2d")&&0==elem.toDataURL("image/webp").indexOf("data:image/webp")},getAudioContextClass:function(){return window.AudioContext||window.webkitAudioContext||window.audioContext},getAudioContext:function(){if(Utilities.audio_context)return Utilities.audio_context;var acc=Utilities.getAudioContextClass();return acc?(Utilities.audio_context=new acc,Utilities.audio_context):null},isMacOS:function(){return navigator.platform.includes("Mac")},isWindows:function(){return navigator.platform.includes("Win")},isLinux:function(){return navigator.platform.includes("Linux")},isFirefox:function(){return navigator.userAgent.toLowerCase().includes("firefox")},isOpera:function(){return navigator.userAgent.toLowerCase().includes("opera")},isSafari:function(){var ua=navigator.userAgent.toLowerCase();return ua.includes("safari")&&!ua.includes("chrome")},isEdge:function(){return navigator.userAgent.includes("Edge")},isChrome:function(){var isChromium=window.chrome,winNav=window.navigator,vendorName=winNav.vendor,isOpera=winNav.userAgent.includes("OPR"),isIEedge=winNav.userAgent.includes("Edge");return!!winNav.userAgent.match("CriOS")||null!==isChromium&&void 0!==isChromium&&"Google Inc."===vendorName&&!1===isOpera&&!1===isIEedge},isIE:function(){return navigator.userAgent.includes("MSIE")||navigator.userAgent.includes("Trident/")},getSimpleUserAgentString:function(){return Utilities.isFirefox()?"Firefox":Utilities.isOpera()?"Opera":Utilities.isSafari()?"Safari":Utilities.isChrome()?"Chrome":Utilities.isIE()?"MSIE":""},getColorGamut:function(){return window.matchMedia?window.matchMedia("(color-gamut: rec2020)").matches?"rec2020":window.matchMedia("(color-gamut: p3)").matches?"P3":window.matchMedia("(color-gamut: srgb)").matches?"srgb":"":""},isEventSupported:function(event){var isSupported,testEl=document.createElement("div");return event="on"+event,isSupported=event in testEl,isSupported||(testEl.setAttribute(event,"return;"),isSupported="function"==typeof testEl[event]),testEl=null,isSupported},normalizeWheel:function(event){var sX=0,sY=0,pX=0,pY=0;return"detail"in event&&(sY=event.detail),"wheelDelta"in event&&(sY=-event.wheelDelta/120),"wheelDeltaY"in event&&(sY=-event.wheelDeltaY/120),"wheelDeltaX"in event&&(sX=-event.wheelDeltaX/120),"axis"in event&&event.axis===event.HORIZONTAL_AXIS&&(sX=sY,sY=0),pX=10*sX,pY=10*sY,"deltaY"in event&&(pY=event.deltaY),"deltaX"in event&&(pX=event.deltaX),(pX||pY)&&event.deltaMode&&(1==event.deltaMode?(pX*=40,pY*=40):(pX*=800,pY*=800)),pX&&!sX&&(sX=pX<1?-1:1),pY&&!sY&&(sY=pY<1?-1:1),{spinX:sX,spinY:sY,pixelX:pX,pixelY:pY,deltaMode:event.deltaMode||0}},saveFile:function(filename,data,mimetype){var a=document.createElement("a");a.setAttribute("style","display: none"),document.body.appendChild(a);var blob=new Blob([data],mimetype),url=window.URL.createObjectURL(blob);navigator.msSaveOrOpenBlob?navigator.msSaveOrOpenBlob(blob,filename):(a.href=url,a.download=filename,a.click(),window.URL.revokeObjectURL(url))},monotonicTime:function(){return performance?Math.round(performance.now()):Date.now()},StringToUint8:function(str){for(var u8a=new Uint8Array(str.length),i=0,j=str.length;i<j;++i)u8a[i]=str.charCodeAt(i);return u8a},Uint8ToString:function(u8a){for(var c=[],i=0;i<u8a.length;i+=32768)c.push(String.fromCharCode.apply(null,u8a.subarray(i,i+32768)));return c.join("")},ArrayBufferToBase64:function(uintArray){var s="";if(uintArray.subarray)for(var i=0,len=uintArray.length;i<len;i+=10400)s+=String.fromCharCode.apply(null,uintArray.subarray(i,Math.min(i+10400,len)));else for(var i=0,len=uintArray.length;i<len;i+=10400)s+=String.fromCharCode.apply(null,uintArray.slice(i,Math.min(i+10400,len)));return window.btoa(s)},convertDataURIToBinary:function(dataURI){var base64Index=dataURI.indexOf(";base64,")+";base64,".length,base64=dataURI.substring(base64Index),raw=window.atob(base64),rawLength=raw.length,array=new Uint8Array(new ArrayBuffer(rawLength));for(i=0;i<rawLength;i++)array[i]=raw.charCodeAt(i);return array},ParseResponseHeaders:function(headerStr){var headers={};if(!headerStr)return headers;for(var headerPairs=headerStr.split("\r\n"),i=0;i<headerPairs.length;i++){var headerPair=headerPairs[i],index=headerPair.indexOf(": ");if(index>0){var key=headerPair.substring(0,index),val=headerPair.substring(index+2);headers[key]=val}}return headers},parseParams:function(q){for(var e,params={},a=/\+/g,r=/([^&=]+)=?([^&]*)/g,d=function(s){return decodeURIComponent(s.replace(a," "))};e=r.exec(q);)params[d(e[1])]=d(e[2]);return params},getparam:function(prop){var getParameter=window.location.getParameter;getParameter||(getParameter=function(key){return window.location.queryStringParams||(window.location.queryStringParams=Utilities.parseParams(window.location.search.substring(1))),window.location.queryStringParams[key]});var value=getParameter(prop);try{void 0===value&&void 0!==typeof sessionStorage&&(value=sessionStorage.getItem(prop))}catch(e){value=null}return value},getboolparam:function(prop,default_value){var v=Utilities.getparam(prop);return null===v?default_value:-1!==["true","on","1","yes","enabled"].indexOf(String(v).toLowerCase())},hasSessionStorage:function(){if("undefined"==typeof Storage)return!1;try{var key="just for testing sessionStorage support";return sessionStorage.setItem(key,"store-whatever"),sessionStorage.removeItem(key),!0}catch(e){return!1}},getConnectionInfo:function(){var c=navigator.connection;if(!c)return{};var i={};return c.type&&(i.type=c.type),c.effectiveType&&(i["effective-type"]=c.effectiveType),!isNaN(c.downlink)&&!isNaN(c.downlink)&&c.downlink>0&&isFinite(c.downlink)&&(i.downlink=Math.round(1e3*c.downlink*1e3)),!isNaN(c.downlinkMax)&&!isNaN(c.downlinkMax)&&c.downlinkMax>0&&isFinite(c.downlinkMax)&&(i["downlink.max"]=Math.round(1e3*c.downlinkMax*1e3)),!isNaN(c.rtt)&&c.rtt>0&&(i.rtt=c.rtt),i}},MOVERESIZE_SIZE_TOPLEFT=0,MOVERESIZE_SIZE_TOP=1,MOVERESIZE_SIZE_TOPRIGHT=2,MOVERESIZE_SIZE_RIGHT=3,MOVERESIZE_SIZE_BOTTOMRIGHT=4,MOVERESIZE_SIZE_BOTTOM=5,MOVERESIZE_SIZE_BOTTOMLEFT=6,MOVERESIZE_SIZE_LEFT=7,MOVERESIZE_MOVE=8,MOVERESIZE_SIZE_KEYBOARD=9,MOVERESIZE_MOVE_KEYBOARD=10,MOVERESIZE_CANCEL=11,MOVERESIZE_DIRECTION_STRING={0:"SIZE_TOPLEFT",1:"SIZE_TOP",2:"SIZE_TOPRIGHT",3:"SIZE_RIGHT",4:"SIZE_BOTTOMRIGHT",5:"SIZE_BOTTOM",6:"SIZE_BOTTOMLEFT",7:"SIZE_LEFT",8:"MOVE",9:"SIZE_KEYBOARD",10:"MOVE_KEYBOARD",11:"CANCEL"},MOVERESIZE_DIRECTION_JS_NAME={0:"nw",1:"n",2:"ne",3:"e",4:"se",5:"s",6:"sw",7:"w"},LANGUAGE_TO_LAYOUT={da:"dk"};